#include <Arduino.h>
#include <TinyGPSAsync.h>

#if false // NEO-6M
 #define GPSBAUD 9600
#define COLDRESETBYTES {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0xFF, 0xFF, 0x02, 0x00, 0x0E, 0x61}
#define WARMRESETBYTES {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0x01, 0x00, 0x02, 0x00, 0x11, 0x6C}
#define HOTRESETBYTES  {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0x00, 0x00, 0x02, 0x00, 0x10, 0x68}
#define isValidDateTime(d, t) true
#elif false // L80-R
#define RX D0
#define TX D1
#define GPSBAUD 9600
// #define COLDRESETBYTES "$PMTK103*30\r\n" // second coldest
#define GPSNAME "L80-R"
#define COLDRESETBYTES "$PMTK104*37\r\n"
#define WARMRESETBYTES "$PMTK102*31\r\n"
#define HOTRESETBYTES  "$PMTK101*32\r\n"
#define isValidDateTime(d, t) (d.Year() != 2080 || d.Month() != 1)
#elif true // Quescan M10FD    
#define GPSNAME "Quescan M10FD"
#define RX D1
#define TX D0
#define GPSBAUD 38400
#define COLDRESETBYTES {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0xFF, 0xFF, 0x02, 0x00, 0x0E, 0x61}
#define WARMRESETBYTES {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0x01, 0x00, 0x02, 0x00, 0x11, 0x6C}
#define HOTRESETBYTES  {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0x00, 0x00, 0x02, 0x00, 0x10, 0x68}
#define INITIALSTART { 0xB5, 0x62, 0x06, 0x01, 0x03, 0x00, 0xF0, 0x04, 0x01, 0xFE, 0x10 }
#define isValidDateTime(d, t) true
#elif false // Small Chinese clone
#define GPSNAME "Beitian AT6558F"
#define RX D0
#define TX D1
#define GPSBAUD 9600
#define COLDRESETBYTES {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0xFF, 0xFF, 0x02, 0x00, 0x0E, 0x61}
#define WARMRESETBYTES {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0x01, 0x00, 0x02, 0x00, 0x11, 0x6C}
#define HOTRESETBYTES  {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0x00, 0x00, 0x02, 0x00, 0x10, 0x68}
#define INITIALSTART { 0xB5, 0x62, 0x06, 0x01, 0x03, 0x00, 0xF0, 0x04, 0x01, 0xFE, 0x10 }
#define isValidDateTime(d, t) true
#elif true // Sparkfun SAM-M10Q
#define GPSNAME "Sparkfun SAM-M10Q"
#define RX D1
#define TX D0
#define GPSBAUD 9600
#define COLDRESETBYTES {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0xFF, 0xFF, 0x02, 0x00, 0x0E, 0x61}
#define WARMRESETBYTES {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0x01, 0x00, 0x02, 0x00, 0x11, 0x6C}
#define HOTRESETBYTES  {0xB5, 0x62, 0x06, 0x04, 0x04, 0x00, 0x00, 0x00, 0x02, 0x00, 0x10, 0x68}
#define INITIALSTART { 0xB5, 0x62, 0x06, 0x01, 0x03, 0x00, 0xF0, 0x04, 0x01, 0xFE, 0x10 }
#define isValidDateTime(d, t) true
#endif

void setup()
{
  pinMode(D7, OUTPUT);
  digitalWrite(D7, LOW); // GPS off for now

  Serial.begin(GPSBAUD);
  Serial1.begin(GPSBAUD, SERIAL_8N1, RX, TX);

    while (true)
    {
        if (Serial1.available())
            Serial.write(Serial1.read());
        if (Serial.available())
            Serial1.write(Serial.read());
    }
}

void loop()
{
}